<!DOCTYPE html>
<html>
    <head>
        <title>Adventures in hyperspectral imaging_vol 1</title>
        <link rel="stylesheet" type = "text/css" href="../css/style.css">
    </head>
    
	<body>
        
		<div class="container">
			<a href="../index.html">Home</a>
			<h1>Adventures in hyperspectral imaging</h1>
			<h2>Vol 1</h2>
			
			<h4>Rev. 12/15/2021 LRM</h4>
			
			<p>To complement a dense post about research methods, this post is intended to be nice to look at. My goal is that the text area will be less than or equal to the image area.</p>
			
			<img src="../images/MI animation.gif" alt="">
			
			<p>The image above shows the elemental concentration of a heterogeneous basaltic melt inclusion trapped in olivine. The animation was generated from a hyperspectral image collected on an SEM using energy-dispersive X-ray spectroscopy (EDS) using a silicon drift detector (SDD). The raw data were processed using ImageJ to bin the image "slices" into summed "stacks" corresponding to the energy range for a set of 6 arbitrarily chosen elements (Si, Ti, Al, Ca, Mg, and S). The animation was generated from 6 frames using ImageMagick.</p>
			
			<p><a href="https://drive.google.com/file/d/1LkoojOCrQRbRBBS0gGU7xVX-2H99LGRe/view?usp=sharing">Here</a> is another animation showing the entire unbinned energy range. Note that the animation is somewhat noisy, hence it's usually necessary to sum (or average) several frames to make a useful image.</p>
			
			<p>Hyperspectral EDS images are somewhat inconvenient to manipulate owing to their large size (usually 1s to 10s of GB). A typical workflow involves using commercial software or scripting tools to extract elemental images, spectra, and compositional information from selected regions, and the full dataset is discarded after processing is complete.</p>
			
			<p>Here's a short script run in ImageJ to import the image and apply the "Fire" lookup table...</p>
			<pre><code>
import_path = "C:/Users/Lowell Moore/Documents/Virginia Tech/
	Microprobe lab/Users/Lowell M/200110 QP test mount/
	QP-12 xl 1 mi 1 - Copy.raw";

img_width = 512;
img_height = 416;
img_num = 1000;

run("Raw...", "open=[import_path] image=[16-bit Unsigned]
	width=img_width height=416 number=img_num");
run("Fire");
			</code></pre>
			
			<p>ImageJ provides an excellent environment for processing these images -- through a variety of both GUI and scripting tools. For example, EDS spectra can be viewed by selecting a region of the image (for example with the circle tool) and opening the profile viewer with Image > Stacks > Plot Z-axis Prfile. From there, the user can click the "live" button to view spectra from other regions in the image or "Save..." to export spectra to .csv for further processing.</p>
			
			<img src="../images/MI animation.gif" alt="">
			<img src="../images/MI Mg.png" alt="">
			
			<p>In the screenshot above, the window on the left shows the location (yellow circle) over which an average EDS spectrom is being plotted to the right. The vertical blue line on the spectrum to the right corresponds to the image (slice) shown to the left. The peak in the EDS spectrum at the ~430th slice (~0.7 keV) corresponds to characteristic X-rays generated by S atoms. The bright feature in the image is a blob of cooled sulfide melt which exsolved from the melt inclusion as it naturally cooled.</p>
		
		</div>
		
    </body>
</html>
